<?xml version="1.0" encoding="UTF-8" ?>
<mvvm:BaseView xmlns="http://xamarin.com/schemas/2014/forms"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:mvvm="clr-namespace:Demo.Movie.Views.MVVM"
               xmlns:vm="clr-namespace:Demo.Movie.Core.ViewModels;assembly=Demo.Movie.Core"
               xmlns:sharpnado="clr-namespace:Sharpnado.MaterialFrame;assembly=Sharpnado.MaterialFrame"
               x:Class="Demo.Movie.Views.FilmModal"
               x:TypeArguments="vm:FilmModalViewModel"
               BackgroundColor="Transparent">
    <ContentPage.Content>

        <Grid HorizontalOptions="Fill"
              VerticalOptions="Fill">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackLayout BackgroundColor="Black"
                         HorizontalOptions="Fill"
                         VerticalOptions="Fill"
                         Opacity="0.7"
                         Grid.Row="0"
                         Grid.Column="0"/>

            <sharpnado:MaterialFrame LightThemeBackgroundColor="Gray"
                                     MaterialTheme="AcrylicBlur"
                                     MaterialBlurStyle="Light"
                                     HorizontalOptions="Fill"
                                     VerticalOptions="Fill"
                                     CornerRadius="10"
                                     Margin="16"
                                     Padding="16,12"
                                     Grid.Row="0"
                                     Grid.Column="0">

                <StackLayout HorizontalOptions="Center"
                             VerticalOptions="Fill"
                             Spacing="10" >

                    <Frame CornerRadius="10"
                           IsClippedToBounds="True"
                           WidthRequest="360"
                           HeightRequest="534"
                           Padding="0">
                       <Image x:Name="FilmPosterImage"
                              Source="{Binding ChosenFilm.poster_url, Converter={StaticResource UriToImageSourceConverter}}"
                              Aspect="AspectFill"/>
                    </Frame>

                    <Label Text="{Binding ChosenFilm.title}"
                           Style="{StaticResource Key=LabelHeaderStyle}"
                           HorizontalOptions="StartAndExpand"/>

                        <Label HorizontalOptions="Start"
                               FontSize="16">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Released: "
                                            TextColor="Gray"/>
                                    <Span Text="{Binding ChosenFilm.release_date}"/>
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>

                        <Label Text="{Binding ChosenFilm.overview}"
                               HorizontalOptions="Start"
                               HorizontalTextAlignment="Start"
                               VerticalOptions="End" />

                        <Grid VerticalOptions="End"
                              ColumnSpacing="24"
                              Margin="0,8,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Button Text="Back"
                                    BackgroundColor="Transparent"
                                    Clicked="BackButton_Clicked"/>

                            <Button Text="View Trailer"
                                    Command="{Binding ViewTrailerCommand}"
                                    CommandParameter="{Binding ChosenFilm.id}"
                                    Grid.Row="0"
                                    Grid.Column="1"/>

                        </Grid>

                </StackLayout >

            </sharpnado:MaterialFrame>

        </Grid>
        
    </ContentPage.Content>
</mvvm:BaseView>
